<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

				var inbox = window.geemails
				// console.log(inbox);

				//Goal: get setinterval to work.

				function showHide2(){
					var newContentMessage = this.querySelectorAll('.newMessageContent')[0];
					if (newContentMessage.style.display === 'none'){
						newContentMessage.style.display = 'block';
					} else {
						newContentMessage.style.display = 'none';
					}
				}
				
				
				var intervalID = setInterval(newMessage, 3000);
				
				
				function newMessage(){
				var incoming = getNewMessage();
				newCount++
				newSub = incoming.subject
				newSend = incoming.sender
				newBod = incoming.body;
				newDate = incoming.date
				
				var newMessageHeader = document.createElement('div');
				newMessageHeader.className = 'newHead';
				document.body.appendChild(newMessageHeader)

				var newDateElem = document.createElement('div');
				newDateElem.className = 'newDate';
				newDateElem.innerHTML = 'Date: ' + newDate;
				newMessageHeader.appendChild(newDateElem);

				var newSendElem = document.createElement('div');
				newSendElem.className = 'newSend';
				newSendElem.innerHTML = 'From: ' + newSend;
				newMessageHeader.appendChild(newSendElem);

				var newSubElem = document.createElement('div');
				newSubElem.className = 'newSub';
				newSubElem.innerHTML = 'Subject: ' + newSub;
				newMessageHeader.appendChild(newSubElem);
				
				//Goal: add show/hide button
				
				var newContentButton = document.createElement('div');
					newContentButton.className = 'newContent';
					newContentButton.innerHTML = 'Show';
					newContentButton.addEventListener('click', showHide2)
					document.body.appendChild(newContentButton);

					

					//Goal: add message block and content

					var newMessageElem = document.createElement('div');
					newMessageElem.className = 'newMessageContent';
					newContentButton.appendChild(newMessageElem);

					var newBodyElem = document.createElement('div');
					newBodyElem.className = 'newBody';
					newBodyElem.innerHTML = 'Body: ' + newBod;
					newMessageElem.appendChild(newBodyElem);

					inboxCounter.innerHTML = 'Inbox: ' + newCount;
					console.log(newCount)
					stop();
				}
				
				function stop(){
					if (newCount > 14){
						clearInterval(intervalID)
					}
				}
				
				

				// Goal: create page title

				var pageTitle = document.createElement('title');
				pageTitle.innerHTML = 'Gee-Mail';
				document.body.appendChild(pageTitle)
		
				//Goal: create Header Box

				var headerBox = document.createElement('h1');
				headerBox.id = 'header';
				headerBox.innerHTML = 'Gee-Mail';
				document.body.appendChild(headerBox)

				//Goal: input message data

				
				
				for (i=0;i<inbox.length;i++){
					var message = inbox[i];
					// console.log(inbox[i])
					var messageSubj = message.subject;
					// console.log(messageSubj)
					var messageSender = message.sender;
					// console.log(messageSender)
					var messageBody = message.body;
					// console.log(messageBody)
					var messageDate = message.date;
					// console.log(messageDate)

					var messageHeader = document.createElement('div');
					messageHeader.className = 'messageHeader';
					document.body.appendChild(messageHeader)
					
					var dateElem = document.createElement('div');
					dateElem.className = 'date';
					dateElem.innerHTML = 'Date: ' + messageDate;
					messageHeader.appendChild(dateElem);

					var senderElem = document.createElement('div');
					senderElem.className = 'sender';
					senderElem.innerHTML = 'From: ' + messageSender;
					messageHeader.appendChild(senderElem)

					var subjectElem = document.createElement('div');
					subjectElem.className = 'subject';
					subjectElem.innerHTML = 'Subject: ' + messageSubj;
					messageHeader.appendChild(subjectElem)

					//Goal: add show/hide button
				
					var contentButton = document.createElement('div');
					contentButton.className = 'content';
					contentButton.innerHTML = 'Show';
					document.body.appendChild(contentButton);

					//Goal: add message block and content

					var messageElem = document.createElement('div');
					messageElem.className = 'messageContent';
					contentButton.appendChild(messageElem);

					var bodyElem = document.createElement('div');
					bodyElem.className = 'body';
					bodyElem.innerHTML = 'Body: ' + messageBody;
					messageElem.appendChild(bodyElem);
				}

				//Goal: Make and implement event listener to show/hide content

					var contentButton = document.getElementsByClassName('content')
					for(i=0;i<inbox.length;i++){
					contentButton[i].addEventListener('click', showHide);
					}

			

				function showHide(){
					var contentMessage = this.querySelectorAll('.messageContent')[0];
					if (contentMessage.style.display === 'none'){
						contentMessage.style.display = 'block';
					} else {
						contentMessage.style.display = 'none';
					}
				}
			

				var newCount = inbox.length;
				var inboxCounter = document.createElement('h4');
					inboxCounter.innerHTML = 'inbox: ' + newCount;
					headerBox.appendChild(inboxCounter)
			
			

			}
		</script>
	</head>
	<body>
		<img src="" alt="" id="sideImg">


		<div class="container" id="main">
			<!-- Build Me! -->
		</div>
	</body>
</html>